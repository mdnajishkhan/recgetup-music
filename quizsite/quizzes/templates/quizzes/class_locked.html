{% extends 'quizzes/base.html' %}

{% block content %}
<div class="min-h-[60vh] flex flex-col items-center justify-center text-center px-4">
    
    <!-- Lock Icon -->
    <div class="w-24 h-24 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-8 relative">
        <div class="absolute inset-0 rounded-full bg-red-500/20 animate-ping"></div>
        <i class="fa-solid fa-lock text-4xl text-red-500"></i>
    </div>

    <h1 class="text-3xl md:text-5xl font-black text-white mb-4">Class Not Started Yet</h1>
    <p class="text-xl text-gray-400 mb-8 max-w-xl">
        The class <strong>"{{ class.title }}"</strong> is scheduled for <span class="text-white">{{ class.start_time|date:"M d, g:i A" }}</span>.
    </p>

    <!-- Countdown Container -->
    <div class="grid grid-cols-4 gap-4 mb-10 text-center">
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div id="days" class="text-3xl font-black text-white">00</div>
            <div class="text-xs text-gray-500 uppercase tracking-wider">Days</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div id="hours" class="text-3xl font-black text-white">00</div>
            <div class="text-xs text-gray-500 uppercase tracking-wider">Hours</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div id="minutes" class="text-3xl font-black text-white">00</div>
            <div class="text-xs text-gray-500 uppercase tracking-wider">Mins</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div id="seconds" class="text-3xl font-black text-amber-500">00</div>
            <div class="text-xs text-gray-500 uppercase tracking-wider">Secs</div>
        </div>
    </div>

    <a href="{% url 'home' %}" class="px-8 py-3 rounded-xl bg-white text-black font-bold hover:bg-gray-200 transition">
        Go Back Home
    </a>

</div>

<script>
    // Target Date
    const targetDate = new Date("{{ class.start_time|date:'c' }}").getTime();

    // Update countdown every 1 second
    const x = setInterval(function() {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
            clearInterval(x);
            window.location.reload(); // Reload to see if joinable
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("days").innerText = String(days).padStart(2, '0');
        document.getElementById("hours").innerText = String(hours).padStart(2, '0');
        document.getElementById("minutes").innerText = String(minutes).padStart(2, '0');
        document.getElementById("seconds").innerText = String(seconds).padStart(2, '0');

    }, 1000);
</script>
{% endblock %}
